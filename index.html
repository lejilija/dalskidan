<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Retro Skid친karspel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* CSS Variabler anv칛nds nu ENDAST f칬r CSS-styling, inte f칬r Canvas */
        :root {
            --retro-font: 'Press Start 2P', cursive;
            --primary-red: #ff0000;
            --dark-red: #cc0000;
            --primary-blue: #3b82f6; /* Bl친 f칬r halsduk */
            --dark-grey: #4a5568;
            --black: #000000;
            --light-grey: #a0aec0; /* Beh친lls f칬r UI */
            --snow-white: #ffffff; /* Vit f칬r halsduk & pilar */
            --off-white: #f0f0f0;
            --sky-blue: #bee3f8;
            --yellow: #ffcc00; /* F칬r po칛ngknapp */
            --dark-yellow: #eab308;
            /* Orange, Bl친 nyanser, Gr칬na nyanser etc borttagna d친 de inte anv칛nds */
        }

        /* Grundl칛ggande stil + typsnitt f칬r allt */
        body, button, input, select, textarea {
            font-family: var(--retro-font);
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            background-color: var(--sky-blue);
            margin: 0;
            padding: 70px 15px 20px 15px;
            box-sizing: border-box;
            color: var(--dark-grey);
            overscroll-behavior: none;
            font-size: 10px;
        }

        /* Knappar i h칬rn */
        #scoreboard-button, #play-again-button {
            position: fixed;
            top: 15px;
            padding: 8px 10px;
            font-size: 1.5em;
            color: var(--black);
            border: 3px solid var(--black);
            border-radius: 8px;
            box-shadow: 3px 3px 0px var(--black);
            cursor: pointer;
            z-index: 100;
            transition: all 0.1s ease;
            /* Beh친ll text-align center ifall vi anv칛nder text-ikoner igen */
             text-align: center;
             line-height: 1; /* Justera f칬r ikon-centrering */
        }
        #scoreboard-button { right: 15px; background-color: var(--yellow); }
        #play-again-button { left: 15px; background-color: var(--primary-blue); color: var(--snow-white); }
         #scoreboard-button:hover { background-color: var(--dark-yellow); transform: translate(1px, 1px); box-shadow: 2px 2px 0px var(--black); }
         #play-again-button:hover { background-color: #2563eb; transform: translate(1px, 1px); box-shadow: 2px 2px 0px var(--black); }
         #scoreboard-button:active, #play-again-button:active { transform: translate(3px, 3px); box-shadow: 0px 0px 0px var(--black); }

        /* Po칛ngvisning (flyttad upp) */
        #score-display {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: var(--primary-blue);
            text-shadow: 2px 2px 0px var(--black);
            order: -1;
        }

        .game-container {
            position: relative;
            border: 5px solid var(--black);
            background-color: var(--off-white);
            box-shadow: 5px 5px 0px var(--black);
            border-radius: 0;
            overflow: hidden;
            margin-bottom: 25px;
            width: 100%;
            max-width: 410px;
            box-sizing: border-box;
        }

        canvas {
            display: block;
            width: 100%;
            height: auto;
            max-width: 400px;
            margin: 0 auto;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            background-color: var(--off-white);
        }

        /* Overlays (Start/Game Over) */
        #start-screen, #game-over-screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(240, 240, 240, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            z-index: 10;
            border-radius: 0;
        }

        #game-over-screen { display: none; }

        /* D칬lj element n칛r endast omstartsknappen ska visas */
        #game-over-screen.show-restart-only h1,
        #game-over-screen.show-restart-only #final-score,
        #game-over-screen.show-restart-only #save-score-form {
            display: none;
        }
        #game-over-screen #restart-button { display: block; margin: 0 auto; }
        #game-over-screen.show-restart-only #restart-button { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); margin-top: 0; }
        #game-over-screen:not(.show-restart-only) #restart-button { display: none; }

        h1 {
            font-size: 1.8em;
            margin-bottom: 30px;
            color: var(--primary-blue);
            line-height: 1.3;
            text-shadow: 2px 2px 0px var(--black);
        }
         #game-over-screen h1 { font-size: 1.5em; color: var(--primary-red); text-shadow: 2px 2px 0px var(--black); }
         #final-score { font-size: 1.2em; margin-bottom: 15px; color: var(--dark-grey); }

        /* Knappar */
        button, input[type="submit"] {
            padding: 10px 15px;
            font-size: 1.1em;
            cursor: pointer;
            border: 3px solid var(--black);
            background-color: var(--primary-red);
            color: var(--snow-white);
            border-radius: 0;
            box-shadow: 3px 3px 0px var(--black);
            transition: all 0.1s ease;
            margin-top: 15px;
            text-shadow: 1px 1px 0px var(--dark-red);
            vertical-align: middle;
            box-sizing: border-box; /* Viktigt f칬r linjering */
        }
        button:active, input[type="submit"]:active { box-shadow: 0px 0px 0px var(--black); transform: translate(3px, 3px); }
        button:hover, input[type="submit"]:hover { background-color: var(--dark-red); }
        #start-button { background-color: var(--primary-blue); text-shadow: 1px 1px 0px #2563eb; }
        #start-button:hover { background-color: #2563eb; }
        #restart-button { background-color: var(--primary-blue); text-shadow: 1px 1px 0px #2563eb; }
        #restart-button:hover { background-color: #2563eb; }

        /* Po칛ngtavla Modal */
        #scoreboard-modal { /* ... (samma som innan) ... */ display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 20; align-items: center; justify-content: center; padding: 15px; box-sizing: border-box; }
        #scoreboard-content { /* ... (samma som innan) ... */ background-color: var(--off-white); padding: 20px 25px; border-radius: 0; width: 100%; max-width: 350px; max-height: 80%; overflow-y: auto; text-align: center; border: 4px solid var(--black); box-shadow: 5px 5px 0px var(--black); }
        #scoreboard-content h2 { /* ... (samma som innan) ... */ margin-bottom: 20px; color: var(--primary-blue); font-size: 1.4em; text-shadow: 2px 2px 0px var(--black); }
        #scoreboard-list { /* ... (samma som innan) ... */ list-style: none; padding: 0; margin: 0; text-align: left; }
        #scoreboard-list li { /* ... (samma som innan) ... */ padding: 8px 2px; border-bottom: 2px dashed var(--light-grey); font-size: 1em; display: flex; justify-content: space-between; }
        #scoreboard-list li:last-child { border-bottom: none; }
        #scoreboard-list li span:first-child { /* ... (samma som innan) ... */ color: var(--dark-grey); margin-right: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        #scoreboard-list li span:last-child { /* ... (samma som innan) ... */ color: var(--primary-red); }
        #close-scoreboard { /* ... (samma som innan) ... */ margin-top: 20px; background-color: var(--dark-grey); text-shadow: 1px 1px 0px #2d3748; }
        #close-scoreboard:hover { background-color: #2d3748; }

        /* Kontroller - Ny layout */
        .controls { /* ... (samma som innan) ... */ display: grid; grid-template-columns: repeat(3, auto); grid-template-rows: auto auto; gap: 8px; width: auto; justify-items: center; margin-bottom: 20px; display: none; }
        .control-button {
            display: flex; /* Beh친ll flex f칬r ev. framtida ikoncentrering */
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background-color: var(--dark-grey);
            color: white; /* F칛rgen p친 pilen s칛tts i ::before */
            border: 3px solid var(--black);
            border-radius: 0;
            /* font-size beh칬vs ej f칬r CSS-pilar */
            cursor: pointer;
            box-shadow: 3px 3px 0px var(--black);
            transition: all 0.1s ease;
            user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            position: relative; /* F칬r att positionera ::before */
            overflow: hidden; /* D칬lj ev. delar av pilen som g친r utanf칬r */
        }
        .control-button:active { /* ... (samma som innan) ... */ box-shadow: 0px 0px 0px var(--black); transform: translate(3px, 3px); background-color: #2d3748; }

        /* CSS-pil (triangel) */
        .control-button::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            /* Centrera pilen */
            top: 50%;
            left: 50%;
            /* Standardpil pekar h칬ger */
            border-top: 10px solid transparent; /* Justera storlek h칛r */
            border-bottom: 10px solid transparent;
            border-left: 15px solid var(--snow-white); /* Pilens f칛rg */
            border-right: 0;
            /* Startposition f칬r transform */
            transform: translate(-50%, -50%);
        }

        /* Rotera pilen f칬r olika riktningar */
        #left-button::before {
            transform: translate(-50%, -50%) rotate(180deg);
        }
        #up-button::before {
             /* Justera translate f칬r upp/ner pga triangelns bas */
            transform: translate(-50%, -60%) rotate(-90deg);
        }
        #down-button::before {
             /* Justera translate f칬r upp/ner pga triangelns bas */
            transform: translate(-50%, -40%) rotate(90deg);
        }


        /* Grid placering f칬r ny layout */
        #left-button { grid-column: 1; grid-row: 1; } #up-button { grid-column: 2; grid-row: 1; } #right-button { grid-column: 3; grid-row: 1; } #down-button { grid-column: 2; grid-row: 2; }

        /* Footer */
        footer { /* ... (samma som innan) ... */ margin-top: auto; padding-top: 10px; font-size: 0.9em; color: var(--dark-grey); text-align: center; }

        /* Inputf칛lt & Spara-knapp Linjering */
        input[type="text"] {
            padding: 10px; /* Samma padding som knapp */
            border: 3px solid var(--black);
            border-radius: 0;
            margin: 0 8px 0 0; /* Ta bort margin-top */
            background-color: white;
            color: var(--dark-grey);
            box-shadow: inset 2px 2px 0px var(--light-grey);
            font-size: 1.1em; /* Samma fontstorlek som knapp */
            width: calc(100% - 135px); /* Anpassa bredd baserat p친 knapp */
            max-width: 180px;
            box-sizing: border-box; /* Viktigt! */
            vertical-align: middle;
            line-height: normal; /* 칀terst칛ll line-height */
            height: auto; /* Ta bort fixerad h칬jd */
        }
         input[type="submit"] {
             padding: 10px 15px; /* Samma padding */
             font-size: 1.1em; /* Samma fontstorlek */
             width: auto;
             margin-top: 0; /* Ta bort margin-top */
             height: auto; /* Ta bort fixerad h칬jd */
             vertical-align: middle;
             /* box-sizing: border-box; Redan satt p친 alla knappar */
         }
         #save-score-form {
             display: flex;
             align-items: center; /* Centrera vertikalt */
             justify-content: center;
             width: 100%;
             max-width: 320px; /* 칐ka lite f칬r att f친 plats */
             margin-top: 10px;
         }
    </style>
</head>
<body>
    <button id="play-again-button">郊윒잺</button> <button id="scoreboard-button">游끥</button>

    <div id="score-display">Po칛ng: 0</div>

    <div class="game-container">
        <div id="start-screen">
            <h1>Tyngden p친 dalskidan!</h1>
            <button id="start-button">Nu 친ker vi!</button>
        </div>
        <div id="game-over-screen">
            <h1>Tasking tajming!</h1>
            <p id="final-score">Din po칛ng: 0</p>
            <form id="save-score-form">
                <input type="text" id="player-name" placeholder="Ditt namn" maxlength="10" required>
                <input type="submit" value="Spara">
            </form>
            <button id="restart-button">Spela igen</button>
        </div>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <div class="controls" id="touch-controls">
        <button class="control-button" id="up-button"></button>
        <button class="control-button" id="left-button"></button>
        <button class="control-button" id="right-button"></button>
        <button class="control-button" id="down-button"></button>
    </div>

    <div id="scoreboard-modal">
        <div id="scoreboard-content">
            <h2>Po칛ngtavla</h2>
            <ol id="scoreboard-list"></ol>
            <button id="close-scoreboard">St칛ng</button>
        </div>
    </div>

    <footer>powered by Inmemory</footer>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score-display');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button'); // 칀teranv칛nds
        const finalScoreDisplay = document.getElementById('final-score');
        const scoreboardButton = document.getElementById('scoreboard-button');
        const playAgainButton = document.getElementById('play-again-button');
        const scoreboardModal = document.getElementById('scoreboard-modal');
        const closeScoreboardButton = document.getElementById('close-scoreboard');
        const scoreboardList = document.getElementById('scoreboard-list');
        const saveScoreForm = document.getElementById('save-score-form');
        const playerNameInput = document.getElementById('player-name');
        const touchControls = document.getElementById('touch-controls');

        // Spelinst칛llningar
        const gridSize = 20;
        const pixelSize = 1;
        const canvasSize = 400;
        const tileCount = canvasSize / gridSize;

        // Definiera f칛rger direkt i JS f칬r Canvas
        const colors = {
            primaryRed: '#ff0000', mediumRed: '#dd0000', darkRed: '#aa0000',
            primaryBlue: '#3b82f6', // F칬r halsduk
            black: '#000000',
            snowWhite: '#ffffff', // F칬r halsduk
            lightWhite: '#eeeeee',
            offWhite: '#f0f0f0', slopeGrey1: '#d1d5db', slopeGrey2: '#e5e7eb',
            // F칛rger f칬r 칬l-emoji (beh칬vs ej f칬r fillText)
        };

        // Spelvariabler
        let skier;
        let food;
        let score;
        let changingDirection;
        let gameLoopTimeout;
        let gameSpeed = 140;
        let isGameOver;
        let currentFoodIndex = 0;
        const foodTypes = ['beer']; // Endast 칬l

        // --- Initiering och Start ---
        function initGame() { /* ... (samma som innan) ... */
            clearTimeout(gameLoopTimeout); gameLoopTimeout = null; isGameOver = false; score = 0; updateScoreDisplay();
            skier = { x: Math.floor(tileCount / 2), y: Math.floor(tileCount / 2), dx: 0, dy: 0, scarf: [{ x: Math.floor(tileCount / 2), y: Math.floor(tileCount / 2) }] };
            changingDirection = false; gameOverScreen.style.display = 'none'; gameOverScreen.classList.remove('show-restart-only'); startScreen.style.display = 'none';
            placeFood(); gameLoop();
        }
        startButton.addEventListener('click', initGame);
        restartButton.addEventListener('click', initGame);
        playAgainButton.addEventListener('click', initGame);

        // --- Spelloop ---
        function gameLoop() { /* ... (samma som innan) ... */
            if (isGameOver) { showGameOver(); return; } changingDirection = false;
            clearTimeout(gameLoopTimeout);
            gameLoopTimeout = setTimeout(() => {
                clearAndDrawBackground(); drawFood(); moveSkier(); drawSkier(); checkCollision();
                if (!isGameOver) { gameLoop(); } else { showGameOver(); }
            }, gameSpeed);
        }

        // --- Ritfunktioner ---
        function clearAndDrawBackground() { /* ... (samma som innan) ... */
            ctx.fillStyle = colors.offWhite; ctx.fillRect(0, 0, canvasSize, canvasSize);
            ctx.fillStyle = colors.slopeGrey1; const stripeWidth = gridSize * 3, gapWidth = gridSize * 4;
            for (let x = -canvasSize; x < canvasSize; x += (stripeWidth + gapWidth)) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x + stripeWidth, 0); ctx.lineTo(x + stripeWidth + canvasSize, canvasSize); ctx.lineTo(x + canvasSize, canvasSize); ctx.closePath(); ctx.fill(); }
            ctx.fillStyle = colors.slopeGrey2; const stripeWidth2 = gridSize * 2, gapWidth2 = gridSize * 5;
            for (let x = -canvasSize + gridSize*2; x < canvasSize; x += (stripeWidth2 + gapWidth2)) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x + stripeWidth2, 0); ctx.lineTo(x + stripeWidth2 + canvasSize, canvasSize); ctx.lineTo(x + canvasSize, canvasSize); ctx.closePath(); ctx.fill(); }
        }
        function drawSkier() { /* ... (samma som innan, med m칬nster) ... */
            skier.scarf.forEach((segment, index) => { if (index > 0) { ctx.fillStyle = colors.black; ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize); let segmentColor; const patternIndex = index % 3; if (patternIndex === 1) { segmentColor = colors.primaryRed; } else if (patternIndex === 2) { segmentColor = colors.snowWhite; } else { segmentColor = colors.primaryBlue; } ctx.fillStyle = segmentColor; ctx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2); } });
            const headX = skier.scarf[0].x * gridSize; const headY = skier.scarf[0].y * gridSize; ctx.fillStyle = colors.black; ctx.fillRect(headX, headY, gridSize, gridSize); ctx.fillStyle = colors.primaryRed; ctx.fillRect(headX + 1, headY + 1, gridSize - 2, gridSize - 2); ctx.fillStyle = colors.snowWhite; ctx.fillRect(headX + 4, headY + 5, 12, 4); ctx.fillStyle = colors.black; ctx.fillRect(headX + 7, headY + 6, 2, 2); ctx.fillRect(headX + 11, headY + 6, 2, 2);
        }

        function drawFood() {
            // Ritar nu en 칬l-emoji
            if (food.type !== 'beer') return;

            const foodX = food.x * gridSize;
            const foodY = food.y * gridSize;

            // S칛tt fontstorlek (lite mindre 칛n gridSize f칬r att passa bra)
            ctx.font = `${gridSize * 0.9}px sans-serif`; // Anpassa storlek efter behov
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle'; // Centrera vertikalt

            // Rita emojin centrerat i rutan
            ctx.fillText('游꽄', foodX + gridSize / 2, foodY + gridSize / 2);
        }


        // --- Spelmekanik (samma) ---
        function moveSkier() { /* ... */ head = { x: skier.scarf[0].x + skier.dx, y: skier.scarf[0].y + skier.dy }; skier.scarf.unshift(head); didEatFood = skier.scarf[0].x === food.x && skier.scarf[0].y === food.y; if (didEatFood) { score += 10; updateScoreDisplay(); placeFood(); } else { skier.scarf.pop(); } }
        function placeFood() { /* ... */ while (true) { newFoodX = Math.floor(Math.random() * tileCount); newFoodY = Math.floor(Math.random() * tileCount); collision = false; for (let i = 0; i < skier.scarf.length; i++) { if (newFoodX === skier.scarf[i].x && newFoodY === skier.scarf[i].y) { collision = true; break; } } if (!collision) break; } foodType = foodTypes[0]; /* Alltid 'beer' */ food = { x: newFoodX, y: newFoodY, type: foodType }; }
        function checkCollision() { /* ... */ head = skier.scarf[0]; if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) { isGameOver = true; return; } for (let i = 1; i < skier.scarf.length; i++) { if (head.x === skier.scarf[i].x && head.y === skier.scarf[i].y) { isGameOver = true; return; } } }
        function showGameOver() { /* ... */ clearTimeout(gameLoopTimeout); gameLoopTimeout = null; finalScoreDisplay.textContent = `Din po칛ng: ${score}`; gameOverScreen.classList.remove('show-restart-only'); gameOverScreen.style.display = 'flex'; playerNameInput.value = ''; playerNameInput.focus(); }
        function updateScoreDisplay() { /* ... */ scoreDisplay.textContent = `Po칛ng: ${score}`; }

        // --- Kontroller (samma) ---
        document.addEventListener('keydown', handleKeyDown); function handleKeyDown(event) { if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) { event.preventDefault(); } changeDirection(event.keyCode); } function changeDirection(keyCode) { if (changingDirection || isGameOver) return; const LEFT_KEY = 37, RIGHT_KEY = 39, UP_KEY = 38, DOWN_KEY = 40; const goingUp = skier.dy === -1, goingDown = skier.dy === 1; const goingRight = skier.dx === 1, goingLeft = skier.dx === -1; if (skier.dx === 0 && skier.dy === 0 && [LEFT_KEY, RIGHT_KEY, UP_KEY, DOWN_KEY].includes(keyCode)) { if (keyCode === LEFT_KEY) skier.dx = -1; else if (keyCode === RIGHT_KEY) skier.dx = 1; else if (keyCode === UP_KEY) skier.dy = -1; else if (keyCode === DOWN_KEY) skier.dy = 1; changingDirection = true; return; } if (keyCode === LEFT_KEY && !goingRight) { skier.dx = -1; skier.dy = 0; changingDirection = true; } else if (keyCode === UP_KEY && !goingDown) { skier.dx = 0; skier.dy = -1; changingDirection = true; } else if (keyCode === RIGHT_KEY && !goingLeft) { skier.dx = 1; skier.dy = 0; changingDirection = true; } else if (keyCode === DOWN_KEY && !goingUp) { skier.dx = 0; skier.dy = 1; changingDirection = true; } }
        function isTouchDevice() { try { document.createEvent("TouchEvent"); return true; } catch (e) { return false; } }
        if (isTouchDevice()) {
             touchControls.style.display = 'grid'; // Visa kontroller
             document.getElementById('up-button').addEventListener('touchstart', (e) => { e.preventDefault(); changeDirection(38); });
             document.getElementById('down-button').addEventListener('touchstart', (e) => { e.preventDefault(); changeDirection(40); });
             document.getElementById('left-button').addEventListener('touchstart', (e) => { e.preventDefault(); changeDirection(37); });
             document.getElementById('right-button').addEventListener('touchstart', (e) => { e.preventDefault(); changeDirection(39); });
         }

        // --- Po칛ngtavla ---
        function getHighScores() { const scores = localStorage.getItem('skiGameHighScores_v2'); return scores ? JSON.parse(scores) : []; }
        function saveHighScore(name, score) { const scores = getHighScores(); scores.push({ name, score }); scores.sort((a, b) => b.score - a.score); scores.splice(10); localStorage.setItem('skiGameHighScores_v2', JSON.stringify(scores)); }
        function displayHighScores() { const scores = getHighScores(); scoreboardList.innerHTML = ''; if (scores.length === 0) { scoreboardList.innerHTML = '<li>Inga po칛ng!</li>'; } else { scores.forEach((entry, index) => { const li = document.createElement('li'); li.innerHTML = `<span>${index + 1}. ${entry.name}</span><span>${entry.score} p</span>`; scoreboardList.appendChild(li); }); } }

        // Uppdaterad logik f칬r knappar
        scoreboardButton.addEventListener('click', () => { if (!isGameOver && startScreen.style.display === 'none' && gameLoopTimeout) { clearTimeout(gameLoopTimeout); gameLoopTimeout = null; } displayHighScores(); scoreboardModal.style.display = 'flex'; });
        closeScoreboardButton.addEventListener('click', () => { scoreboardModal.style.display = 'none'; if (gameOverScreen.classList.contains('show-restart-only')) { gameOverScreen.style.display = 'flex'; } else if (!isGameOver && startScreen.style.display === 'none' && !gameLoopTimeout) { gameLoop(); } });
        saveScoreForm.addEventListener('submit', (e) => { e.preventDefault(); const playerName = playerNameInput.value.trim(); if (playerName) { saveHighScore(playerName, score); gameOverScreen.classList.add('show-restart-only'); gameOverScreen.style.display = 'none'; displayHighScores(); scoreboardModal.style.display = 'flex'; } else { playerNameInput.focus(); } });

        // K칬r ig친ng n칛r sidan laddats
        clearAndDrawBackground();

    </script>
</body>
</html>
